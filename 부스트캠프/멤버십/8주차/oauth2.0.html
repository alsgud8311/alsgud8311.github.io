<!DOCTYPE html> <html lang="ko"><head>
<title>Oauth2.0</title>
<base href="../../..">
<meta name="pathname" content="부스트캠프/멤버십/8주차/oauth2.0.html">
<meta name="description" content="mh_obsidian - Oauth2.0">
<meta property="og:title" content="Oauth2.0">
<meta property="og:description" content="mh_obsidian - Oauth2.0">
<meta property="og:type" content="website">
<meta property="og:url" content="부스트캠프/멤버십/8주차/oauth2.0.html">
<meta property="og:image" content="https://i.imgur.com/YLNYO9t.png">
<meta property="og:site_name" content="mh_obsidian"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><meta charset="UTF-8"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:4px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#layout{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math:not(.math-inline),table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const l=await fetch(e);if(!l.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await l.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let l=document.createRange().createContextualFragment(o),n=Array.from(l.children);for(let e of n)e?.classList?.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e?.classList?.remove("hide")}),10);t.before(l),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(l){let n=o[l],c=l+1;n?(n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(c),l<o.length&&n.addEventListener("load",(()=>e(c)))):l<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager mod-macos is-frameless is-hidden-frameless native-scrollbars show-inline-title show-ribbon ctp-latte ctp-mocha-old ctp-accent-blue anuppuccin-accent-toggle anp-callout-block anp-callout-color-toggle anp-custom-checkboxes anp-speech-bubble anp-codeblock-numbers anp-table-toggle anp-table-width anp-table-auto anp-table-th-highlight anp-table-row-alt anp-header-color-toggle anp-header-margin-toggle anp-header-divider-color-toggle anp-h1-blue anp-h2-sky anp-h3-lavender anp-h4-teal anp-h5-lavender anp-h6-mauve anp-bold-red anp-italic-green anp-highlight-blue anp-colorful-frame anp-custom-vault-toggle anp-file-icons anp-floating-header anp-pdf-blend-toggle-dark anp-full-rainbow-color-toggle anp-floating-status-bar anp-default-tab anp-border-layout anp-bg-fix anp-theme-ext-amoled ctp-notion-light ctp-notion-dark is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="layout"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="Oauth2.0_0">Oauth2.0</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h2"><h2 data-heading="OAuth란" dir="auto" class="heading" id="OAuth란_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>OAuth란</h2></div><div class="el-p"><p dir="auto">OAuth는 Open Authorization의 줄임말로, 액세스 위임을 위한 개방형 표준 인가 프로토콜이다.<br>
해당 인증 바에식은 서비스 제공 업체(네이버, 깃허브 등)의 정보를 비밀번호 없이 정보에 대한 액세스 권한을 부여할 수 있는 안전한 방식으로, 현재 많이 사용하는 로그인 방식이다.</p></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/YLNYO9t.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
위의 사진처럼 요즘 흔하게 볼 수 있는 로그인 방식이다.<br>
어떠한 애플리케이션을 이용하고자 할 때, 구글, 카카오와 같은 제 3의 서비스에서 사용자가 가지고 있는 계정의 정보를 <strong>사용자가 허용하는 범위</strong>에 한해서 가져올 수 있다.</p></div><div class="el-h3"><h3 data-heading="Authorization과 Authentication" dir="auto" class="heading" id="Authorization과_Authentication_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Authorization과 Authentication</h3></div><div class="el-p"><p dir="auto">Authentication(인증)과 Authorization(인가)의 개념에 대해서 잘 모르고 있는 경우가 많다. 크게 보면 둘 다 같은 단어 같지만, 두 개념을 세부적으로 알게 되면 큰 차이가 있기 때문에 이 점부터 짚고 넘어가야 할 필요성이 있다.</p></div><div class="el-p"><p dir="auto">Authentication(인증) : 해당 사용자가 자신이 주장하는 그 사람인지 확인을 하는 것<br>
Authorization(인가) : 해당 사용자가 리소스에 접근할 수 있는 권한을 부여하는 것</p></div><div class="el-p"><p dir="auto">예를 들어 편의점에 술을 사러 간다고 생각해보자.<br>
편의점에는 술을 사기 위해서는 성인이 되어야 한다. 그렇기에 편의점 알바는 손님에게 '민증 검사'를 요구한다. 민증을 통해 해당 손님이 자신이 주장하는 '성인'이 맞는지 <strong>민증을 통해 '인증'하고 알바생은 이를 확인한다.</strong> 이 과정이 인증이다.<br>
민증을 통해 성인임이 확인 되면, 해당 손님에게는 술을 <strong>살 수 있는 권한</strong> 이 주어진다. 이것이 인가이다.</p></div><div class="el-p"><p dir="auto">따라서 다시금 OAuth의 풀 네임을 직역해보았을 때, 개방된 인가라고 생각할 수 있다. 특정 제 3의 서비스들은 인증이 완료되면, 해당 서비스에게 유저에 대한 정보를 넘겨주는 OAuth의 의미를 생각해볼 수 있다.</p></div><div class="el-h3"><h3 data-heading="OAuth의 핵심 주체" dir="auto" class="heading" id="OAuth의_핵심_주체_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>OAuth의 핵심 주체</h3></div><div class="el-p"><p dir="auto">OAuth에서의 주체는 크게 세가지,  작게 나누면 네 가지 정도로 나뉜다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Resource Owner(or User)
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>리소스를 소유한 사용자로, 애플리케이션의 리소스 공유 요청을 허가</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>서비스를 이용하려는 사용자</li>
</ul>
</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Client(or Consumer)
<ul class="has-list-bullet">
<li data-line="4" dir="auto"><span class="list-bullet"></span>사용자의 허가를 받아 사용자의 리소스에 접근할 수 있도록 요청하는 응용 애플리케이션</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>제공하려는 서비스</li>
</ul>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Server(or Provider)
<ul class="has-list-bullet">
<li data-line="7" dir="auto"><span class="list-bullet"></span>사용자의 허가를 검증하고, 클라이언트에 응용 애플리케이션에 보유한 사용자의 리소스를 공유하는 서버</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>일반적으로 허가를 담당하는 검증 서버(Authorization Server)와 실제 사용자 리소스를 보유한 리소스 서버(Resource Server, or API Server)로 분리되어 있음</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span>제3의 서비스(네이버, 카카오, 구글 등)</li>
</ul>
</li>
</ul></div><div class="el-h3"><h3 data-heading="작동 방식" dir="auto" class="heading" id="작동_방식_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>작동 방식</h3></div><div class="el-pre"><pre><code data-line="0"> +--------+                               +---------------+
 |        |--(A)- Authorization Request -&gt;|   Resource    |
 |        |                               |     Owner     |
 |        |&lt;-(B)-- Authorization Grant ---|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(C)-- Authorization Grant --&gt;| Authorization |
 | Client |                               |     Server    |
 |        |&lt;-(D)----- Access Token -------|               |
 |        |                               +---------------+
 |        |
 |        |                               +---------------+
 |        |--(E)----- Access Token ------&gt;|    Resource   |
 |        |                               |     Server    |
 |        |&lt;-(F)--- Protected Resource ---|               |
 +--------+                               +---------------+
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">프로토콜 자체의 플로우는 이와 같이 구성된다.<br>
클라이언트는 인증 요청을 보내고, 유저가 인증을 완료하면 클라이언트측에 인증이 제대로 완료되었음을 알린다.<br>
인증이 제대로 완료되면 클라이언트는 인증 서버에 인증이 확인되었음을 알리고, 엑세스 토큰을 얻는다.<br>
엑세스 토큰을 얻게 되면 클라이언트는 리소스, 즉 유저의 정보를 가지고 있는 서버에 엑세스 토큰을 보내 유저가 명시한 제한된 리소스를 가져올 수 있다.</p></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/oCemxxw.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"> </p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">리소스 소유자(이하 유저)가 클라이언트 서비스를 이용하고자 이용 요청을 보냄</li>
<li data-line="1" dir="auto">클라이언트는 검증(Authorization) 서버에 액세스 토큰을 요청</li>
<li data-line="2" dir="auto"><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>검증 서버는 유저에게 인가(Authentication) 동의를 요청
<ul class="has-list-bullet">
<li data-line="3" dir="auto"><span class="list-bullet"></span>여기에서 유저는 어느 정도의 범위를 해당 서비스(client)에게 제공할 지 직접 선택할 수 있다.</li>
</ul>
</li>
<li data-line="4" dir="auto">유저는 인가(Authentication) 동의를 응답</li>
<li data-line="5" dir="auto">검증 서버는 리소스에 접근할 수 있는 액세스 토큰을 생성해 클라이언트로 전송</li>
<li data-line="6" dir="auto">클라이언트는 액세스 토큰을 저장</li>
<li data-line="7" dir="auto">클라이언트는 액세스 토큰을 가지고 리소스 서버에 요청</li>
<li data-line="8" dir="auto">리소스 서버는 액세스 토큰의 유효성을 파악하고 나서, 요청한 리소스를 클라이언트에 응답</li>
<li data-line="9" dir="auto">클라이언트는 유저에 서비스 이용을 응답</li>
</ol></div><div class="el-p"><p dir="auto">과 같이 이루어지는 것이다.</p></div><div class="el-h3"><h3 data-heading="엑세스 토큰을 가져오는 방식" dir="auto" class="heading" id="엑세스_토큰을_가져오는_방식_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>엑세스 토큰을 가져오는 방식</h3></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/03sHT3u.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
엑세스토큰의 경우 네 가지 방식을 통해 이루어진다.<br>
현재 Implicit 방식과 Password Grant(Resource Owner Credentials) 방식의 경우 Deprecated 상태이며, 가장 많이 쓰이는 방식은 Authorization Code 방식이다. 비밀번호를 직접 넘겨주지 않으면서도 엑세스 토큰을 바로 클라이언트로 보내는 방식이 아닌 Code를 받아 다시 인증 서버로 보낸 후에 엑세스 토큰을 받아오는 방식이 한 단계를 더 거치면서 보안상으로 더욱 이점을 가지기 때문이다.</p></div><div class="el-h3"><h3 data-heading="엑세스 토큰에 담겨있는 정보" dir="auto" class="heading" id="엑세스_토큰에_담겨있는_정보_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>엑세스 토큰에 담겨있는 정보</h3></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/S2eSA4H.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
<img src="https://i.imgur.com/0NICjKN.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
인증 서버로부터 받아오는 엑세스 토큰은 위와 같은 정보들을 담고 있다.</p></div><div class="el-h3"><h3 data-heading="Authorization Code 방식 더 알아보기" dir="auto" class="heading" id="Authorization_Code_방식_더_알아보기_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Authorization Code 방식 더 알아보기</h3></div><div class="el-p"><p dir="auto">그렇다면 현재 많이 사용되고 있는 Authorization Code방식에 대해 자세히 알아보자.</p></div><div class="el-pre"><pre class="language-text" tabindex="0"><code data-line="0" class="language-text is-loaded">     +----------+
     | Resource |
     |   Owner  |
     |          |
     +----------+
          ^
          |
         (B)
     +----|-----+          Client Identifier      +---------------+
     |         -+----(A)-- &amp; Redirection URI ----&gt;|               |
     |  User-   |                                 | Authorization |
     |  Agent  -+----(B)-- User authenticates ---&gt;|     Server    |
     |          |                                 |               |
     |         -+----(C)-- Authorization Code ---&lt;|               |
     +-|----|---+                                 +---------------+
       |    |                                         ^      v
      (A)  (C)                                        |      |
       |    |                                         |      |
       ^    v                                         |      |
     +---------+                                      |      |
     |         |&gt;---(D)-- Authorization Code ---------'      |
     |  Client |          &amp; Redirection URI                  |
     |         |                                             |
     |         |&lt;---(E)----- Access Token -------------------'
     +---------+       (w/ Optional Refresh Token)

   Note: The lines illustrating steps (A), (B), and (C) are broken into
   two parts as they pass through the user-agent.

                     Figure 3: Authorization Code Flow
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Authorization Code의 방식은 클라이언트가 인증 서버에 자신의 서비스를 등록한 뒤, 해당 서비스의 코드와 redirect URI를 보내면서 시작된다.<br>
여기서 redirect URI는  인증 서버에서 자체적인 로그인 페이지를 띄우기 때문에 유저가 로그인이 된 후 인증이 완료되었을 때 다시 redirect URI로 보내게 된다.<br>
여기서 인증이 완료되었을 경우 redirect URI에서는 code를 URI에 붙여서 보내주는데, 이 code를 클라이언트가 인증 서버에 다시금 보내면서 엑세스 토큰을 받을 수 있다. 여기서 계속 엑세스 토큰을 클라이언트에서 들고 있는 것보다 리프레시 토큰을 통해 엑세스 토큰에는 만료 시간을 두고 만료되면 리프레시 토큰을 통해 엑세스토큰을 재발급 받는 방식이 보다 안전하기 떄문에 인증 서버에서도 이러한 방식을 사용한다. 따라서 리프레시 토큰 또한 함께 받을 수 있다.</p></div><div class="el-pre"><pre class="language-text" tabindex="0"><code data-line="0" class="language-text is-loaded">+--------+                                           +---------------+
  |        |--(A)------- Authorization Grant ---------&gt;|               |
  |        |                                           |               |
  |        |&lt;-(B)----------- Access Token -------------|               |
  |        |               &amp; Refresh Token             |               |
  |        |                                           |               |
  |        |                            +----------+   |               |
  |        |--(C)---- Access Token ----&gt;|          |   |               |
  |        |                            |          |   |               |
  |        |&lt;-(D)- Protected Resource --| Resource |   | Authorization |
  | Client |                            |  Server  |   |     Server    |
  |        |--(E)---- Access Token ----&gt;|          |   |               |
  |        |                            |          |   |               |
  |        |&lt;-(F)- Invalid Token Error -|          |   |               |
  |        |                            +----------+   |               |
  |        |                                           |               |
  |        |--(G)----------- Refresh Token -----------&gt;|               |
  |        |                                           |               |
  |        |&lt;-(H)----------- Access Token -------------|               |
  +--------+           &amp; Optional Refresh Token        +---------------+

               Figure 2: Refreshing an Expired Access Token
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">엑세스 토큰이 발급되면, 클라이언트는 이 엑세스토큰을 가지고 사용자의 정보를 담고 있는 리소스 서버에 엑세스 토큰과 함께 정보를 요청하는 API를 보낸다. 리소스 서버는 이에 응답하여 처음 유저가 인증할 때 서비스에 체크한 정보 제공의 범위까지의 정보를 담아 클라이언트에 보내준다.</p></div><div class="el-p"><p dir="auto">이렇게 엑세스 토큰을 보내다가 중간에 엑세스 토큰이 만료되면, 리프레시 토큰을 보내 새로운 엑세스 토큰을 발급받아 기존의 엑세스 토큰을 교환하는 방식으로 진행된다.</p></div><div class="el-h3"><h3 data-heading="PKCE" dir="auto" class="heading" id="PKCE_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>PKCE</h3></div><div class="el-p"><p dir="auto">PKCE(Proof Key for Code Exchange)는 Authorization Code Flow를 사용할 때 코드 교환 과정의 보안을 강화하기 위해 OAuth 2.1에서 필수적으로 사용하도록 지정되어 있는 기술이다. 기존 Authorization Code Flow보다 더 높은 보안성을 요구한다.</p></div><div class="el-p"><p dir="auto">PKCE는 다음과 같은 필드들을 추가적으로 가진다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code>code_verifier</code>: 앱으로부터 생성되는 임의의 랜덤 문자열이다.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><code>code_challenge</code>:&nbsp;<code>code_verifier</code>와 짝을 이루는 문자열
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span><code>code_verifier</code>를 그대로 사용하는 경우도 있지만 S256 해싱 알고리즘으로 암호화하는 것이 권장된다. OAuth 서버는 이 문자열을 복호화하여,&nbsp;<code>code_verifier</code>와 같은지 확인함으로써 클라이언트를 검증한다.</li>
</ul>
</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><code>code_challenge_method</code>:&nbsp;<code>code_verifier</code>의 변환에 어떤 함수가 사용되는지(S256 또는 plain) 지정하는 필드이다. 기본값은 plain으로, 이 경우&nbsp;<code>code_verifier</code>와&nbsp;<code>code_challenge</code>는 같은 것으로 간주된다.</li>
</ul></div><div class="el-p"><p dir="auto">이 필드들을 통해 OAuth 서버는 인증 요청과 토큰 요청이 동일한 클라이언트로부터 온 것인지 확인할 수 있다.</p></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/AchwHfm.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
PCKE의 동작 방식은 위 사진과 같이 유저가 로그인 링크를 클릭하면 앱 자체에서 인증 코드 요청을 보내기 전에 <code>code_verifier</code>와 <code>code_challenge</code>를 생성하는 과정이 기존의 code 방식에서 추가되었다.</p></div><div class="el-p"><p dir="auto">인증 코드 요청을 할 때 이 <code>code_challenge</code>와 함께 요청이 날아간다. 사용자가 로그인을 하고 사용자가 원하는 정보의 공개 제한 범위를 선택하고 로그인을 하게 되면 code를 담아 리다이렉트된다.</p></div><div class="el-p"><p dir="auto">이후에 code를 가지고 다시금 앱이 토큰을 얻기 위해 요청을 보내는 과정에서 아까 인증 서버로 보냈던 <code>code_challenge</code>와 비교할 대상 문자열인 <code>code_verifier</code>를 함께 보낸다. 비교 문자열이 서로 검증해서 맞아 떨어지게 되면 엑세스 토큰과 선택적으로 리프레시 토큰을 다시금 보내준다. 이후에는 유저가 받은 엑세스 토큰을 가지고 요청 및 응답을 하는 방식이다.</p></div><div class="el-h3"><h3 data-heading="OAuth의 장점" dir="auto" class="heading" id="OAuth의_장점_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>OAuth의 장점</h3></div><div class="el-p"><p dir="auto">OAuth가 다양한 소셜 로그인의 수단으로 사용된 이유는 사용자의 모든 계정 정보를 알지 않아도 회원의 정보에 접근할 수 있다는 사실이 보안에 도움이 되기 때문이다.</p></div><div class="el-p"><p dir="auto">추가적으로 로그인을 하는 과정에서 서비스에 제공할 수 있는 개인정보의 범위를 사용자가 직접 제한할 수 있기 때문에, 애플리케이션의 입장에서는 허용된 범위의 리소스에만 접근할 수 있다는 사실 또한 보안에 강하면서도 인증과 권한 부여를 동시에 할 수 있다는 장점 또한 가진다. 괜스레 모든 정보를 다른 애플리케이션에서도 가지고 있다가 악용될 가능성을 높이는 것보단 필요한 정보만 가져다 쓰는 것이 모두에게 이득이 될 수 있기 때문에 현재 사실상의 업계 표준으로 자리잡고 있다.</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/8주차/oauth2.0.html#Oauth2.0_0" data-path="#Oauth2.0_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Oauth2.0">Oauth2.0</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/8주차/oauth2.0.html#OAuth란_0" data-path="#OAuth란_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="OAuth란">OAuth란</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#Authorization과_Authentication_0" data-path="#Authorization과_Authentication_0"><div class="tree-item-inner heading-link" heading-name="Authorization과 Authentication">Authorization과 Authentication</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#OAuth의_핵심_주체_0" data-path="#OAuth의_핵심_주체_0"><div class="tree-item-inner heading-link" heading-name="OAuth의 핵심 주체">OAuth의 핵심 주체</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#작동_방식_0" data-path="#작동_방식_0"><div class="tree-item-inner heading-link" heading-name="작동 방식">작동 방식</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#엑세스_토큰을_가져오는_방식_0" data-path="#엑세스_토큰을_가져오는_방식_0"><div class="tree-item-inner heading-link" heading-name="엑세스 토큰을 가져오는 방식">엑세스 토큰을 가져오는 방식</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#엑세스_토큰에_담겨있는_정보_0" data-path="#엑세스_토큰에_담겨있는_정보_0"><div class="tree-item-inner heading-link" heading-name="엑세스 토큰에 담겨있는 정보">엑세스 토큰에 담겨있는 정보</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#Authorization_Code_방식_더_알아보기_0" data-path="#Authorization_Code_방식_더_알아보기_0"><div class="tree-item-inner heading-link" heading-name="Authorization Code 방식 더 알아보기">Authorization Code 방식 더 알아보기</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#PKCE_0" data-path="#PKCE_0"><div class="tree-item-inner heading-link" heading-name="PKCE">PKCE</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/8주차/oauth2.0.html#OAuth의_장점_0" data-path="#OAuth의_장점_0"><div class="tree-item-inner heading-link" heading-name="OAuth의 장점">OAuth의 장점</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></body></html>