<!DOCTYPE html> <html lang="ko"><head>
<title>React Fiber</title>
<base href="../../..">
<meta name="pathname" content="부스트캠프/멤버십/5주차/react-fiber.html">
<meta name="description" content="Minhyung's Dev Log - React Fiber">
<meta property="og:title" content="React Fiber">
<meta property="og:description" content="Minhyung's Dev Log - React Fiber">
<meta property="og:type" content="website">
<meta property="og:url" content="https://alsgud8311.github.io/부스트캠프/멤버십/5주차/react-fiber.html">
<meta property="og:image" content="https://blog.kakaocdn.net/dn/bnWwD4/btqGexjfADe/GWh2KY6PKrn3QPr7dXWlk1/img.gif">
<meta name="author" content="Cho Minhyung"><meta property="og:site_name" content="Minhyung's Dev Log"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><meta charset="UTF-8"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://alsgud8311.github.io/site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:4px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#layout{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math:not(.math-inline),table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const l=await fetch(e);if(!l.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await l.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let l=document.createRange().createContextualFragment(o),n=Array.from(l.children);for(let e of n)e?.classList?.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e?.classList?.remove("hide")}),10);t.before(l),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(l){let n=o[l],c=l+1;n?(n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(c),l<o.length&&n.addEventListener("load",(()=>e(c)))):l<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager native-scrollbars show-inline-title show-ribbon anp-theme-ext-amoled ctp-notion-light ctp-notion-dark is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="layout"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-mtext{display:inline-block;text-align:left}mjx-msqrt{display:inline-block;text-align:left}mjx-root{display:inline-block;white-space:nowrap}mjx-surd{display:inline-block;vertical-align:top}mjx-sqrt{display:inline-block;padding-top:.07em}mjx-sqrt>mjx-box{border-top:.07em solid}mjx-sqrt.mjx-tall>mjx-box{padding-left:.3em;margin-left:-.3em}mjx-msup{display:inline-block;text-align:left}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c20::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c221A.TEX-S2::before{padding:1.15em 1.02em .65em 0;content:"√"}mjx-c.mjx-c28.TEX-S3::before{padding:1.45em .736em .949em 0;content:"("}mjx-c.mjx-c29.TEX-S3::before{padding:1.45em .736em .949em 0;content:")"}mjx-c.mjx-c65::before{padding:.448em .444em .011em 0;content:"e"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c67::before{padding:.453em .5em .206em 0;content:"g"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-msub{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-mover{display:inline-block;text-align:left}mjx-mover:not([limits=false]){padding-top:.1em}mjx-mover:not([limits=false])>*{display:block;text-align:left}mjx-mrow{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D465.TEX-I::before{padding:.442em .572em .011em 0;content:"x"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c20D7.TEX-V::before{padding:.714em .5em 0 0;content:"→"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c22A5::before{padding:.668em .778em 0 0;content:"⊥"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="React_Fiber_0">React Fiber</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h2"><h2 data-heading="React Fiber란?" dir="auto" class="heading" id="React_Fiber란?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>React Fiber란?</h2></div><div class="el-p"><p dir="auto">리액트 파이버는 리액트 버전 16버전부터 새롭게 등장한 재조정 알고리즘이다.<br>
해당 알고리즘은 기존의 스택 형식으로 되어있던 리액트의 리렌더링 자체를 바꾼 알고리즘으로, 리액트를 동작하는 근간 자체를 바꾸었다고 보아도 과언이 아니다. </p></div><div class="el-h2"><h2 data-heading="새로운 렌더링 재조정 알고리즘의 필요성" dir="auto" class="heading" id="새로운_렌더링_재조정_알고리즘의_필요성_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>새로운 렌더링 재조정 알고리즘의 필요성</h2></div><div class="el-p"><p dir="auto">리액트 팀은 16버전까지 사용하던 스택 기반의 재조정 알고리즘을 사용했다.<br>
하지만 이러한 스택 기반 재조정 알고리즘의 경우 치명적인 문제점이 존재했다.</p></div><div class="el-p"><p dir="auto"><img src="https://blog.kakaocdn.net/dn/bnWwD4/btqGexjfADe/GWh2KY6PKrn3QPr7dXWlk1/img.gif" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
해당 gif를 보자.<br>
해당 방식은 리액트의 스택 기반의 재조정 알고리즘을 사용해 reconciliation(재조정)을 거치며 애니메이션을 렌더링한 것이다.</p></div><div class="el-p"><p dir="auto"><img src="https://blog.kakaocdn.net/dn/rJmXg/btqGdLWNC9q/tJ0w8uPOaztVyqyIkck80k/img.gif" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
반면 새로운 재조정 알고리즘은 꽤나 깔끔하게 움직이는 모습을 보인다.<br>
둘 사이에 왜 이런 차이가 났느냐고 하면 우리의 모니터를 생각해보면 된다.<br>
현대 일반적인 모니터는 보통 초당 60회 화면 갱신을 한다. 화면을 한번 갱신하고 다음 화면을 갱신하기까지동안 1/60초, 즉 16ms 정도가 걸린다는 얘기다.<br>
하지만 만약에 렌더링을 하는 시간이 16ms보다 더 걸린다면 어떻게 될까?<br>
렌더링을 하는 시간이 16ms보다 더 걸리게 된다면 ui가 업데이트되는 속도는 모니터의 주사율을 따라갈 수 없어 모니터가 원하는 만큼의 속도로 빠르게 갱신되지 못하고 끊기게 된다. 그렇기 때문에 위처럼 끊기는 듯한 애니메이션이 연출된다.</p></div><div class="el-p"><p dir="auto">하지만 스택 알고리즘의 문제는, 이러한 작업들에 대해서 <strong>중단하거나 중요한 작업에 대해 먼저 수행할 수 없다</strong>는 점이었다. 렌더링에 필요한 작업들이 스택에 들어가서 쌓이면 내부적으로 해당 스택을 전부 비울 때까지 동기적으로 작업이 이루어졌는데, 싱글 스레드로 작동하는 자바스크립트로는 이러한 동기 작업을 중단할 수 없었다. 그렇기에 중요한 렌더링 작업들이 후에 비효율적으로 렌더링 작업을 진행하면서 렌더링 문제가 발생하게 되었다.</p></div><div class="el-p"><p dir="auto">이러한 이유 때문에 메타의 리액트 팀에게 있어서 16ms는 중요 고려사항으로 자리잡은데 비해, 스택 기반의 알고리즘은 이를 따라갈 수 없기 때문에 결국 새롭게 내놓은 것이 <strong>파이버 아키텍처</strong>를 기반으로 한 재조정 알고리즘이다.</p></div><div class="el-p"><p dir="auto">그럼 이제 이러한 파이버 아키텍처에 대해 알아보자.</p></div><div class="el-h2"><h2 data-heading="React의 동작 단계" dir="auto" class="heading" id="React의_동작_단계_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>React의 동작 단계</h2></div><div class="el-p"><p dir="auto">React의 내부 동작은 크게 네 가지의 단계로 구분된다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Render : JSX 트랜스파일러를 통해 React.createElement를 실행하여 React Element 생성</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Reconcile(재조정) : 이전에 렌더링된 실제 DOM트리와 새로 렌더링할 React 엘리먼트를 비교하여 변경점 적용</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Commit : 재조정 후 새롭게 만들어진 DOM Element를 브라우저 뷰에 보이게 함</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Update : props, state등이 변경 시에 해당 컴포넌트와 하위 컴포넌트에 대해 업데이트 반복<br>
리액트는 이처럼 Render 후 Update(Reconcile &amp; Commit) 단계를 반복하면서 렌더링을 수행한다. 이 과정에서 활용되는 개념이 가상 DOM(Virtual DOM), 정확히 말하면 <strong>Fiber Node</strong>이다.</li>
</ul></div><div class="el-h2"><h2 data-heading="Fiber Node" dir="auto" class="heading" id="Fiber_Node_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Fiber Node</h2></div><div class="el-p"><p dir="auto">리액트의 렌더링 과정은 Fiber Node를 제외하고 설명할 수 없다. 렌더링 과정에서 근본적으로 활용되는 가상DOM이 곧 Fiber Node이기 때문이다. 그러니 먼저 Fiber Node에 대해 알아보도록 하자.</p></div><div class="el-p"><p dir="auto">리액트 파이버는 리액트에서 관리하는 자바스크립트 객체이다. 파이버는 파이버 재조정자(Fiber Reconciler)가 관리하는데, 이 재조정자가 가상 DOM과 실제 DOM을 비교해 변동사항을 수집 및 반영하는 역할을 한다.</p></div><div class="el-h3"><h3 data-heading="왜 도입하게 되었을까?" dir="auto" class="heading" id="왜_도입하게_되었을까?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>왜 도입하게 되었을까?</h3></div><div class="el-p"><p dir="auto">이 리액트 파이버를 도입하게 된 이유, 즉 리액트 파이버의 목표는 크게 두가지로 볼 수 있다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>반응성 문제 해결(애니메이션, 레이아웃, 사용자 인터랙션 등)
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>작업을 분할하고 우선순위를 매겨 먼저 필요한 렌더링부터 작업</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>상대적으로 우선순위가 낮은 작업을 중단 후에 나중에 다시 시작</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>이전에 했던 작업이 필요없어질 경우 폐기</li>
</ul>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>비동기적으로 동작하여 효율 증대<br>
- 싱글 스레드에서 동작하는 자바스크립트에서 동기적인 작업을 통해 가지는 비효율성을 해소<br>
이러한 문제를 해결하기 위해 리액트 팀은 파이버를 도입했다. 사실상 점점 애플리케이션 자체가 고도화되면서 하나의 인터랙션에도 많은 이벤트와 애니메이션들이 이루어지는 상황에 위와 같은 문제를 해결하는 것은 필수불가결한 일이기도 했다.</li>
</ul></div><div class="el-h3"><h3 data-heading="Fiber Node의 구성요소" dir="auto" class="heading" id="Fiber_Node의_구성요소_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Fiber Node의 구성요소</h3></div><div class="el-p"><p dir="auto">그렇다면 Fiber Node의 구성요소에 대해 알아보자.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FiberNode</span></span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token maybe-class-name">WorkTag</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pendingProps</span><span class="token operator">:</span> mixed<span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token maybe-class-name">TypeOfMode</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Instance</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tag</span> <span class="token operator">=</span> tag<span class="token punctuation">;</span> 
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">elementType</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">stateNode</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

  <span class="token comment">// Fiber</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword control-flow">return</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">child</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">sibling</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ref</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">refCleanup</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">pendingProps</span> <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">memoizedProps</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">updateQueue</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">memoizedState</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">dependencies</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">mode</span> <span class="token operator">=</span> mode<span class="token punctuation">;</span>

  <span class="token comment">// Effects</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">flags</span> <span class="token operator">=</span> <span class="token maybe-class-name">NoFlags</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">subtreeFlags</span> <span class="token operator">=</span> <span class="token maybe-class-name">NoFlags</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">deletions</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">lanes</span> <span class="token operator">=</span> <span class="token maybe-class-name">NoLanes</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">childLanes</span> <span class="token operator">=</span> <span class="token maybe-class-name">NoLanes</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">alternate</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="Instance" dir="auto" class="heading" id="Instance_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Instance</h4></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>tag
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>리액트 파이버는 1:1관계를 가진다. DOM이든 컴포넌트든 무조건 1:1의 관계를 지니며, 이 유형은 태그 속성 내의 <code>this.tag</code>에 저장된다. 이 type에서는 fuctional component, class component 등 우리가 아는 여러 유형들의 노드들에 대해서 번호로 관리한다.</li>
</ul>
</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>type</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>elementType
<ul class="has-list-bullet">
<li data-line="4" dir="auto"><span class="list-bullet"></span>어떤 요소인지 타입 구분</li>
</ul>
</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>key
<ul class="has-list-bullet">
<li data-line="6" dir="auto"><span class="list-bullet"></span>컴포넌트를 식별하는데 사용되는 고유값이다. 한 배열 안에서 같은 tag를 가진 여러 개의 요소들이 있다면 재조정자는 순서와 일부 요소의 변경에 대해서 같은 태그를 가지고 있기 때문에 비교하기가 어렵다. 따라서 key를 통해 각 컴포넌트를 구별할 수 있도록 하여 불필요한 렌더링을 방지한다.</li>
</ul>
</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>StateNode
<ul class="has-list-bullet">
<li data-line="8" dir="auto"><span class="list-bullet"></span>해당 객체에 대한 참조를 가지고 있으며 이 속성을 사용하여 파이버와 관련된 상태들에 접근할 수 있다. </li>
</ul>
</li>
</ul></div><div class="el-h4"><h4 data-heading="Fiber" dir="auto" class="heading" id="Fiber_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Fiber</h4></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>child, sibling, return</p>
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>Fiber를 기반으로 트리를 만드는 과정에서 필요한 관계가 이 세 가지 속성에 의해 결정된다. </li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>특히 child가 children(여러개)이 아닌 하나의 자식만을 가지고 있다는 점이 특이한데, 그 child는 자식의 첫 번째 요소를 가리킨다. 자식이 첫 번째 요소만 가리키기 때문에, 만약 하나의 부모에 여러 개의 요소가 들어 있다면, 첫 번째 요소만 자식 요소가 되고 마너지는 해당 <strong>자식 요소의 형제 요소들이 된다.</strong></li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>return의 경우 상위 항목, 즉 부모 항목에 대한 참조를 나타낸다.</li>
</ul>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>index</p>
<ul class="has-list-bullet">
<li data-line="5" dir="auto"><span class="list-bullet"></span>같은 태그로 된 여러 개의 형제가 있을 경우 이러한 요소들의 순서를 구별하기 위해 숫자로 관리한다</li>
</ul>
</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>ref, refCleanup</p>
<ul class="has-list-bullet">
<li data-line="7" dir="auto"><span class="list-bullet"></span>특정 컴포넌트나 DOM요소에 접근할 수 있도록 DOM요소나 인스턴스에 대한 참조</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span>컴포넌트가 언마운트 될 떄 메모리 누수를 방지하기 위해 refCleanup을 통해 불필요한 참조를 제거함</li>
</ul>
</li>
<li data-line="9" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>mode</p>
<ul class="has-list-bullet">
<li data-line="10" dir="auto"><span class="list-bullet"></span>FiberNode가 렌더링되는 방식 정의</li>
<li data-line="11" dir="auto"><span class="list-bullet"></span>Concurrent Mode나 StrictMode와 같은 동작 결정</li>
</ul>
</li>
<li data-line="13" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>pendingprops</p>
<ul class="has-list-bullet">
<li data-line="14" dir="auto"><span class="list-bullet"></span>아직 작업에 대해서 처리하지 못한 props를 저장</li>
</ul>
</li>
<li data-line="15" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>memoizedProps</p>
<ul class="has-list-bullet">
<li data-line="16" dir="auto"><span class="list-bullet"></span>pendingprops이 렌더링이 완료되면 memoizedProps로 옮겨가며 현재 가지고 있는 props를 표현한다</li>
</ul>
</li>
<li data-line="17" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>updateQueue</p>
<ul class="has-list-bullet">
<li data-line="18" dir="auto"><span class="list-bullet"></span>상태 업데이트, 콜백함수, DOM 업데이트 등 필요한 작업을 담아두는 큐이다.</li>
</ul>
</li>
<li data-line="19" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>memoizedState</p>
<ul class="has-list-bullet">
<li data-line="20" dir="auto"><span class="list-bullet"></span>함수 컴포넌트의 훅 목록으로, useState를 비롯한 모든 훅 리스트와 최신 상태 값</li>
</ul>
</li>
<li data-line="21" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>
<p>Alternate</p>
<ul class="has-list-bullet">
<li data-line="22" dir="auto"><span class="list-bullet"></span>뒤에서 더 설명할 것으로, 리액트에 존재하는 두 가지 트리 중에서 자신을 포함하지 않은 반대편 트리를 의미함</li>
</ul>
</li>
</ul></div><div class="el-h4"><h4 data-heading="flags" dir="auto" class="heading" id="flags_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>flags</h4></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>flags
<ul class="has-list-bullet">
<li data-line="1" dir="auto"><span class="list-bullet"></span>노드에서 수행하는 작업을 나타내는 비트 플래그</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>placement(새로운 DOM 노드 삽입), Update(기존 DOM 노드 업데이트), Deletion(DOM 노드 삭제) 등의 플래그를 통해 리렌더링 여부를 결정</li>
</ul>
</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>subtreeflags
<ul class="has-list-bullet">
<li data-line="4" dir="auto"><span class="list-bullet"></span>하위 트리 내에서 발생해야 하는 작업을 나타냄</li>
</ul>
</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>deletions
<ul class="has-list-bullet">
<li data-line="6" dir="auto"><span class="list-bullet"></span>삭제해야 하는 자식 노드들의 목록 관리</li>
<li data-line="7" dir="auto"><span class="list-bullet"></span>삭제해야 하는 노드들을 미리 배열에 추가해놓고, 일괄로 처리함</li>
</ul>
</li>
<li data-line="8" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>lanes
<ul class="has-list-bullet">
<li data-line="9" dir="auto"><span class="list-bullet"></span>Concurrent Mode에서 작업의 우선순위를 투적</li>
</ul>
</li>
<li data-line="10" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>childLanes
<ul class="has-list-bullet">
<li data-line="11" dir="auto"><span class="list-bullet"></span>하위 트리에서 실행할 작업들의 우선순위를 추적</li>
</ul>
</li>
</ul></div><div class="el-h2"><h2 data-heading="가상 DOM(fiber)을 이용한 리액트 렌더링" dir="auto" class="heading" id="가상_DOM(fiber)을_이용한_리액트_렌더링_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>가상 DOM(fiber)을 이용한 리액트 렌더링</h2></div><div class="el-p"><p dir="auto">리액트의 virtual DOM 개념은 렌더링 되어 있는 상태의 DOM 요소에 가지고 있는 rootFiber의 정보와 더불어 추가적으로 하나의 rootfiber를 따로 구성한다.<br>
여기서 root의 경우 <strong>fiberRoot</strong>와 <strong>rootFiber</strong>로 두 가지의 root가 있다. </p></div><div class="el-p"><p dir="auto">fiberRoot의 경우 createRoot를 통해 만드는 가장 기본적인 html 템플릿의 루트로, 계속해서 안쪽 요소의 렌더링이 이루어지는 SPA의 특성상 고정적인 head와 body를 가진 root를 두고 안쪽 요소들만 갈아끼우기 위해 rootFiber를 따로 두어 실질적인 렌더링이 반복적으로 이루어지는 root를 따로 구분했다.</p></div><div class="el-p"><p dir="auto"> 이 root에 대한 fiber를 구성하는 과정에서 <strong>root fiber를 하나 더 구성</strong>하는 것이 react virtual DOM의 핵심이다. 리액트는 <strong>기존 렌더링 되어 있는 상태의 DOM의 정보를 가진 fiber</strong>와 <strong>새롭게 변동사항이 있을 경우에 이를 반영한 버전의 fiber</strong>를 따로 가지고 있는 것이다.</p></div><div class="el-p"><p dir="auto">상태가 변경됐을 경우에, 리액트는 재조정 과정을 통해 현재 렌더링된 DOM 상태를 가진 fiber와 상태 변경이 이루어진 fiber를 비교하여 변경이 이루어져 업데이트가 이루어져야 하는 부분을 찾고 반영한다. 이 일련의 과정은 fiber를 비교하는 과정에서 볼 수 있다.<br>
<img src="https://i.imgur.com/WX5Ji1T.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
위 사진과 같이 rootFiber에서부터 재조정 과정을 시작한다. 파이버는 재조정 과정에서 <strong>performUnitOfWork</strong>라는 함수를 실행시키는데, <code>beginwork</code>와 <code>completework</code> 함수가 포함되어 있다. 따라서 안쪽의 파이버로 계속해서 들어가면서 beginwork가 실행되고, 끝까지 들어갔다가 돌아오는 과정에서 return받으면 completework를 실행하며 해당 파이버에 대한 작업을 종료한다.<br>
<img src="https://i.imgur.com/bMKqP19.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"><br>
아까 말했던 말을 다시금 생각해보자.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>상태가 변경됐을 경우에, 리액트는 재조정 과정을 통해 현재 렌더링된 DOM 상태를 가진 fiber와 상태 변경이 이루어진 fiber를 비교하여 변경이 이루어져 업데이트가 이루어져야 하는 부분을 찾고 반영한다</p>
</blockquote></div><div class="el-p"><p dir="auto">그렇다면 이 상태변경이 이루어진 fiber는 어디에 할당되어 있는가? 바로 현재 렌더링 되어 있는 DOM 트리, 즉 <strong>fiberRootNode의 current 가리키고 있는 rootFiber의 alternate 프로퍼티</strong>이다.</p></div><div class="el-p"><p dir="auto">rootFiber는 current가 가리키고 있는 rootFiber와는 별개로 현재 렌더링된 rootFiber의 alternate props로 다른 rootFiber를 가지고 있다. alternate에 할당된 rootFiber는 변동사항이 반영된 rootFiber이다.<br>
이 두 fiber는 alternate를 통해 서로에 대해 접근하며 변동사항을 반영하고 업데이트된 DOM tree를 만들어낸다. 이렇게 만들어지는 DOM tree는 <strong>workInProgress 트리</strong>라고 한다. 다시금 강조하지만 <strong>workInProgress 트리는 current가 가리키고 있지 않은 alternate의 rootFiber에서 만들어진다.</strong></p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createWorkInProgress</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span> <span class="token literal-property property">pendingProps</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> workInProgress <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">alternate</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>workInProgress <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    workInProgress <span class="token operator">=</span> <span class="token function">createFiber</span><span class="token punctuation">(</span>
      current<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">,</span>
      pendingProps<span class="token punctuation">,</span>
      current<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">,</span>
      current<span class="token punctuation">.</span><span class="token property-access">mode</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">elementType</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">elementType</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">stateNode</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">stateNode</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">_debugID</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">_debugID</span><span class="token punctuation">;</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">_debugSource</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">_debugSource</span><span class="token punctuation">;</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">_debugOwner</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">_debugOwner</span><span class="token punctuation">;</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">_debugHookTypes</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">_debugHookTypes</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    workInProgress<span class="token punctuation">.</span><span class="token property-access">alternate</span> <span class="token operator">=</span> current<span class="token punctuation">;</span>
    current<span class="token punctuation">.</span><span class="token property-access">alternate</span> <span class="token operator">=</span> workInProgress<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">pendingProps</span> <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">;</span>

    workInProgress<span class="token punctuation">.</span><span class="token property-access">subtreeFlags</span> <span class="token operator">=</span> <span class="token maybe-class-name">NoFlags</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">deletions</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>enableProfilerTimer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">actualDuration</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      workInProgress<span class="token punctuation">.</span><span class="token property-access">actualStartTime</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  workInProgress<span class="token punctuation">.</span><span class="token property-access">flags</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">flags</span> <span class="token operator">&amp;</span> <span class="token maybe-class-name">StaticMask</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">childLanes</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">childLanes</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">lanes</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">lanes</span><span class="token punctuation">;</span>

  workInProgress<span class="token punctuation">.</span><span class="token property-access">child</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">child</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">memoizedProps</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">memoizedProps</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">memoizedState</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">memoizedState</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">updateQueue</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">updateQueue</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> currentDependencies <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">dependencies</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">dependencies</span> <span class="token operator">=</span>
    currentDependencies <span class="token operator">===</span> <span class="token keyword null nil">null</span>
      <span class="token operator">?</span> <span class="token keyword null nil">null</span>
      <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">lanes</span><span class="token operator">:</span> currentDependencies<span class="token punctuation">.</span><span class="token property-access">lanes</span><span class="token punctuation">,</span>
          <span class="token literal-property property">firstContext</span><span class="token operator">:</span> currentDependencies<span class="token punctuation">.</span><span class="token property-access">firstContext</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

  workInProgress<span class="token punctuation">.</span><span class="token property-access">sibling</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">sibling</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">index</span><span class="token punctuation">;</span>
  workInProgress<span class="token punctuation">.</span><span class="token property-access">ref</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">ref</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>enableProfilerTimer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">selfBaseDuration</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">selfBaseDuration</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">treeBaseDuration</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">treeBaseDuration</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">_debugNeedsRemount</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token property-access">_debugNeedsRemount</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>workInProgress<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token literal-property property">IndeterminateComponent</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token literal-property property">FunctionComponent</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token literal-property property">SimpleMemoComponent</span><span class="token operator">:</span>
        workInProgress<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> <span class="token function">resolveFunctionForHotReloading</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token literal-property property">ClassComponent</span><span class="token operator">:</span>
        workInProgress<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> <span class="token function">resolveClassForHotReloading</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token literal-property property">ForwardRef</span><span class="token operator">:</span>
        workInProgress<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">=</span> <span class="token function">resolveForwardRefForHotReloading</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
      <span class="token keyword module">default</span><span class="token operator">:</span>
        <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword control-flow">return</span> workInProgress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">dfs(깊이우선탐색) 방식을 활용하여 새롭게 변동사항이 반영된 fiber와 기존의 fiber를 비교한 뒤, 바뀐 부분을 찾고 반영하고, 마지막에 root의 DOM 요소를 리턴하게 되면 새롭게 바꾸어야 할 부분을 반영한 DOM element를 가지게 된다.</p></div><div class="el-p"><p dir="auto">변경사항이 모두 반영된 rootFiber의 DOM Element가 모두 만들어지고 나면, fiberRoot, 즉 createRoot로 만든 root 컨테이너 파이버의 current가 alternate의 rootFiber를 가리키게 한다. 해당 파이버는 새롭게 반영 및 DOM element 생성이 완료된 fiber이다. current의 포인터만을 alternate를 통해 반대편의 만들어진 rootFiber를 가리키도록 하면서 대기 없이 바로 업데이트가 반영된 DOM 트리를 갈아끼우는 것이다.</p></div><div class="el-p"><p dir="auto"><img src="https://d2.naver.com/content/images/2023/07/14.gif" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">이처럼 상태의 변경이나 다른 렌더링에 영향을 끼치는 상태가 변경이 됐을 경우에 재조정을 통해서 fiber를 업데이트하고 이를 DOM 요소에 반영하는 과정을 계속해서 반복하는 과정에서 rootFiber는 기존의 root container인 fiberRoot를 알아야 할 필요성이 있다. 자신이 해당 fiberRoot 안에서 렌더링 되어야 할 요소들의 정보를 담고 있기 때문이다.</p></div><div class="el-p"><p dir="auto">전체적인 두 트리가 공존하면서 비교되고 만들어진 workInProgressfiber를 한 그림에 표현하면 아래와 같이 나오게 된다.<br>
<img src="https://i.imgur.com/1EfuMA3.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-h2"><h2 data-heading="첫 브라우저 렌더링까지의 과정 훑어보기" dir="auto" class="heading" id="첫_브라우저_렌더링까지의_과정_훑어보기_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>첫 브라우저 렌더링까지의 과정 훑어보기</h2></div><div class="el-p"><p dir="auto">위에서 알아본 Fiber Node와 렌더링 방식에 대한 정보는 알았지만 막상 이 객체가 어떤 로직으로 렌더링을 수행하는 지는 아직도 감이 잡히지 않을 것이다.<br>
따라서 우리는 소스 코드를 따라서 대략적인 첫 렌더링 과정을 알아볼 필요가 있다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>리액트의 렌더링은 브라우저가 렌더링에 필요한 DOM 트리를 만드는 과정을 의미한다</p>
</blockquote></div><div class="el-p"><p dir="auto">가장 처음 엔트리 포인트를 만드는 과정부터 첫 페이지가 만들어지기까지의 과정을 알아보자.</p></div><div class="el-h3"><h3 data-heading="엔트리 포인트 만들기" dir="auto" class="heading" id="엔트리_포인트_만들기_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>엔트리 포인트 만들기</h3></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">react-dom의 공식문서에서는 createRoot라는 api를 통해 React에 의해 관리되는 UI의 root, 즉 React 컴포넌트를 표시하는 루트를 생성할 수 있다고 한다. </p></div><div class="el-p"><p dir="auto">코드를 보면 root라는 id를 가지는 element 자체를 루트로 삼고 여기에 React 컴포넌트들을 렌더링시키기 위해 지정하는 것으로 보인다.<br>
React는 SPA(Single-Page-Application)이기 때문에 여러 페이지를 전환하는 것이 아닌, 하나의 페이지에서 모든 서비스 로직이 이루어지는 형태이며, 페이지 또한 새롭게 페이지 전환을 하는 방식이 아니다 보니까 하나의 <code>Index.html</code>만 두고 안쪽 요소만 바꾸어 가면서 렌더링을 하는 방식을 사용한다.</p></div><div class="el-p"><p dir="auto"> 따라서 React가 렌더링할 공간을 createRoot를 통해 만들고,  <code>createFiberRoot()</code>를 호출하여 고유한 <code>FiberRootNode</code>를 생성한다. </p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token comment">// Cyclic construction. This cheats the type system right now because</span>
<span class="token comment">// stateNode is any.</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FiberRootNode</span><span class="token punctuation">(</span>containerInfo<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">)</span><span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>enableSuspenseCallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	root<span class="token punctuation">.</span><span class="token property-access">hydrationCallbacks</span> <span class="token operator">=</span> hydrationCallbacks<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token keyword">const</span> uninitializedFiber <span class="token operator">=</span> <span class="token function">createHostRootFiber</span><span class="token punctuation">(</span>  
  tag<span class="token punctuation">,</span>
  isStrictMode<span class="token punctuation">,</span>
  concurrentUpdatesByDefaultOverride<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token property-access">current</span> <span class="token operator">=</span> uninitializedFiber<span class="token punctuation">;</span>  
uninitializedFiber<span class="token punctuation">.</span><span class="token property-access">stateNode</span> <span class="token operator">=</span> root<span class="token punctuation">;</span>  
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">FiberRootNode 생성자로 만들어진 <code>FiberRootNode</code>는 컨테이너와 태그, 하이드레이션에 대한 정보를 가지고 있다.</p></div><div class="el-p"><p dir="auto">하지만 <code>FiberRootNode</code>가 만들어지고 <code>createHostRootFiber()</code>를 통해 추가적으로 <strong>HostRootFiber</strong> 객체를 만들어  root(FiberRoot)의 current에 해당 fiber node를 할당하고, 추가적으로  <code>uninitializedFiber.stateNode</code> 라는 곳에 root를 다시 참조하도록 하면서 순환 참조 구조를 이루게 하는 모습을 볼 수 있다.</p></div><div class="el-p"><p dir="auto"><img src="https://i.imgur.com/t5Nqgnq.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded">root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">SimpleComp</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">만들어지는 root에 대해서 render 메서드를 실행시키는 과정에서 JSX로 쓰여진 커스텀 컴포넌트는 babel의 트랜스파일러를 통해서 함수로 바뀌게 된다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded">root<span class="token punctuation">.</span><span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">SimpleComp</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">트랜스파일된 js에서는 pragma로 createElement가 설정되어 있기 때문에createElement를 호출시켜 React Element라는 일반 객체를 만들어 반환하는 함수를 render함수에 콜백으로 넣는 듯한 형태를 띈다. </p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Pragma<br>
트랜스파일러나 컴파일러가 특정 코드를 해석하거나 처리할 때 특별한 지시를 내리기 위해 사용하는 주석 형식의 지시문</p>
</blockquote></div><div class="el-pre"><pre class="language-jsx" tabindex="0"><code data-line="0" class="language-jsx is-loaded"><span class="token comment">// Transpiled &lt;SimpleComp /&gt;</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">SimpleComp</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
    <span class="token string">"div"</span><span class="token punctuation">,</span>
    <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
    <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">"Hello react!"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
      <span class="token string">"section"</span><span class="token punctuation">,</span>
      <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
      <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Name : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>
        <span class="token string">"button"</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">setName</span><span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">"Samuel"</span> <span class="token operator">?</span> <span class="token string">"Alice"</span> <span class="token operator">:</span> <span class="token string">"Samuel"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"Click me"</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">참고로 pragma는 jsx에서 모든 dom 요소들에 대해 호출하는 형식으로 되어있기 때문에 계층 구조를 알 수 있다.<br>
아무튼 함수형 커스텀 컴포넌트를 render함수가 콜백으로 가지고 있는 형태이다. 이 createElement를 통해 만들어지는 객체를 render함수를 통해 root에 넣어주는 작업이 수행된다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> config<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> propName<span class="token punctuation">;</span>
  <span class="token comment">// .....</span>
  

  props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> config<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// props 세팅</span>
  
  key <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> config<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">;</span>
  <span class="token comment">// key 세팅</span>
  
  props<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">=</span> children<span class="token punctuation">;</span>
  <span class="token comment">// childrent 세팅</span>
  
  <span class="token keyword control-flow">return</span> <span class="token function"><span class="token maybe-class-name">ReactElement</span></span><span class="token punctuation">(</span>
    type<span class="token punctuation">,</span>
    key<span class="token punctuation">,</span>
    ref<span class="token punctuation">,</span>
    self<span class="token punctuation">,</span>
    source<span class="token punctuation">,</span>
    <span class="token maybe-class-name">ReactCurrentOwner</span><span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">createElement는 이런 형식으로 되어 있는데, ReactElement를 반환하는 함수이다.<br>
일반 html element의 경우에는 jsx 트랜스파일링 과정에서</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>type: html element 이름</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>key : element의 key</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>children: 하위 요소<br>
를 가지게 되는데 , SingleComp와 같은 커스텀 컴포넌트와 같은 경우에는 위에서 봤다시피 함수형으로 되어있기 때문에 createElement 안에 SingleComp라는 함수를 반환하는 함수가 type에 들어가게 되고, render api를 통해 root에 SingleComp의 Element를 가지게 된다.</li>
</ul></div><div class="el-h3"><h3 data-heading="재조정(Reconcile)" dir="auto" class="heading" id="재조정(Reconcile)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>재조정(Reconcile)</h3></div><div class="el-p"><p dir="auto">앞에서 말했다시피 첫 렌더링 단계에서는 <code>root.render(&lt;SingleComp/&gt;)</code>를 실행하면 <code>SimpleComp</code> 라는 React Element만 생성하도록 한 뒤에 재조정 단계로 넘어간다.</p></div><div class="el-p"><p dir="auto">Reconcilation 단계에서는 아까 만들었던 FiberRootNode에 대해서 <code>performUnitOfWork</code>함수를 실행시킨다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>위의 코드에서도 볼 수 있다시피 현재 FiberRoot는 uninitialized된 상태이다</p>
</blockquote></div><div class="el-pre"><pre class="language-tsx" tabindex="0"><code data-line="0" class="language-tsx is-loaded"><span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L1836-L1862)</span>
<span class="token keyword">function</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span>unitOfWork<span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>  
  <span class="token comment">// The current, flushed, state of this fiber is the alternate. Ideally</span>
  <span class="token comment">// nothing should rely on this, but relying on it here means that we don't</span>
  <span class="token comment">// need an additional field on the work in progress.</span>
  <span class="token keyword">const</span> current <span class="token operator">=</span> unitOfWork<span class="token punctuation">.</span><span class="token property-access">alternate</span><span class="token punctuation">;</span>
  <span class="token function">setCurrentDebugFiberInDEV</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> next<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>enableProfilerTimer <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>unitOfWork<span class="token punctuation">.</span><span class="token property-access">mode</span> <span class="token operator">&amp;</span> <span class="token maybe-class-name">ProfileMode</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token maybe-class-name">NoMode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">startProfilerTimer</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    next <span class="token operator">=</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> unitOfWork<span class="token punctuation">,</span> subtreeRenderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">stopProfilerTimerIfRunningAndRecordDelta</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    next <span class="token operator">=</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> unitOfWork<span class="token punctuation">,</span> subtreeRenderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">resetCurrentDebugFiberInDEV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  unitOfWork<span class="token punctuation">.</span><span class="token property-access">memoizedProps</span> <span class="token operator">=</span> unitOfWork<span class="token punctuation">.</span><span class="token property-access">pendingProps</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If this doesn't spawn new work, complete the current work.</span>
    <span class="token function">completeUnitOfWork</span><span class="token punctuation">(</span>unitOfWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    workInProgress <span class="token operator">=</span> next<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token maybe-class-name">ReactCurrentOwner</span><span class="token punctuation">.</span><span class="token property-access">current</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">하지만 가장 먼저 나오는 것은 <code>current</code> 변수에 <code>unitOfWork.alternate</code> 에 할당하는 일인데, 아까 Fiber node의 alternate는 순환참조하고 있는 fiber에서 반대편의 DOM을 가리킨다고 이야기 했던 것을 기억할 것이다.</p></div><div class="el-p"><p dir="auto">따라서 current 변수에 UnitOfWork(변경사항이 들어가있는 Fiber)의 alternate를 할당한 이유는 내가 현재 렌더링된 DOM이 아닌 반대편의 변경 사항을 반영한 DOM을 만든 다음에 이를 current로 교체하여 새로운 current로 만들기 위해 현재 작업할 Fiber 노드의 이전 작업 상태를 가져오는 것임을 알 수 있다.</p></div><div class="el-p"><p dir="auto">다음 코드를 보면 해당 함수에서 <code>beginWork</code>와 <code>completeUnitOfWork</code> 함수가 반복적으로 실행되고 있는 구조임을 알 수 있다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L3828-L3829)</span>
<span class="token keyword">function</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">workInProgress</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">renderLanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token punctuation">{</span>
<span class="token spread operator">...</span>
    <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>workInProgress<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostRoot</span><span class="token operator">:</span>
      <span class="token keyword control-flow">return</span> <span class="token function">updateHostRoot</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> workInProgress<span class="token punctuation">,</span> renderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">beginWork는 fiber와 workInProgress라는 다른 fiber를 받는데, </p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded">    next <span class="token operator">=</span> <span class="token function">beginWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> unitOfWork<span class="token punctuation">,</span> subtreeRenderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">여기서 보면 인자로 받았던 current와 unitOfWork를 넣어주어 두 Fiber를 비교한 후에 변경사항을 반영한 DOM Element를 받는다</p></div><div class="el-p"><p dir="auto">여기서</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>current - 현재 렌더링된 DOM의 반대 DOM 트리의 파이버(곧 현재가 될 것이기 때문에 current에 할당)</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>unitOfWork - 변경사항이 적용된 파이버<br>
라는 점은 계속 기억해두자! 아니면 헷갈려서 나처럼 계속 헤맨다.</li>
</ul></div><div class="el-p"><p dir="auto">앞에서 말했듯이 react는 current라는 파이버 트리 workInProgress라는 파이버 트리, 두 가지 트리를 두고 계속해서 스위칭해가며 한쪽에서는 새롭게 변동사항이 반영된 workInProgress 트리를 만들고, 그 동안엔 current 트리를 보여주다가 workInProgress의 DOM이 모두 완성되면 이를 <strong>current로 바꿔주기 때문</strong>에 workInProgress Tree와 current Tree에 대해서 계속해서 인지하는 것이 중요하다.</p></div><div class="el-p"><p dir="auto">아무튼 beginWork에서 해당 파이버가 HostRoot, 즉 렌더링 되어야 하는 요소들의 루트라면 update를 진행한다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L1278-L1287)</span>
<span class="token keyword">function</span> <span class="token function">updateHostRoot</span><span class="token punctuation">(</span><span class="token parameter">current<span class="token punctuation">,</span> workInProgress<span class="token punctuation">,</span> renderLanes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token function">pushHostRootContext</span><span class="token punctuation">(</span>workInProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Should have a current fiber. This is a bug in React.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> nextProps <span class="token operator">=</span> workInProgress<span class="token punctuation">.</span><span class="token property-access">pendingProps</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> prevState <span class="token operator">=</span> workInProgress<span class="token punctuation">.</span><span class="token property-access">memoizedState</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> prevChildren <span class="token operator">=</span> prevState<span class="token punctuation">.</span><span class="token property-access">element</span><span class="token punctuation">;</span>
  <span class="token function">cloneUpdateQueue</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> workInProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">processUpdateQueue</span><span class="token punctuation">(</span>workInProgress<span class="token punctuation">,</span> nextProps<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> renderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">update과정에서 변동사항을 가진 workInProgress 트리에서 필요한 pendingprops와 memoizedState를 가져오고, 업데이트를 진행한다.<br>
여기서 updateQueue가 일어나는 이유는 여러 개의 상태가 업데이트 될 경우에 이러한 작업들을 계속 하나씩 처리하는 것보다 배치 처리하는 것이 효율적이기 때문에 queue를 활용하여 처리한다.</p></div><div class="el-p"><p dir="auto"><code>beginwork</code>에서 이렇게 분기처리를 해서 각각 요소들에 대해서 알맞은 처리를 해주는 과정을 거치고, 기존 fiber 또한 계층 구조로 이루어져 있기 때문에 자식이 있다면 자식으로, 형제가 있다면 형제 fiber node로 옮겨가면서 똑같이 beginwork를 실행해준다. 이 과정에서 재귀적으로 호출이 일어나며, return 받는 시기는 해당 fiber node가 작업을 마치고 completeUnitOfWork를 실행했을 때이다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code>beginWork</code>는 Fiber 트리의 <strong>하위로 내려가면서</strong> 자식 노드부터 작업을 처리</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>자식 노드의 작업이 끝나면 그 Fiber에서 다시 <code>completeUnitOfWork</code>가 실행되어, 작업이 상위로 완료되며 반환</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>이 과정에서 <strong>재귀적 호출</strong>이나 <strong>순환적 처리</strong>를 통해, 트리의 모든 노드에 대한 작업이 차례차례 처리</li>
</ul></div><div class="el-pre"><pre class="language-tsx" tabindex="0"><code data-line="0" class="language-tsx is-loaded"><span class="token keyword">function</span> <span class="token function">updateHostRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
<span class="token spread operator">...</span>
    <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L1306-L1307)</span>
  <span class="token keyword">const</span> nextChildren <span class="token operator">=</span> nextState<span class="token punctuation">.</span><span class="token property-access">element</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>supportsHydration <span class="token operator">&amp;&amp;</span> prevState<span class="token punctuation">.</span><span class="token property-access">isDehydrated</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L1397)</span>
    <span class="token comment">// Root is not dehydrated. Either this is a client-only root, or it</span>
    <span class="token comment">// already hydrated.</span>
    <span class="token function">resetHydrationState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextChildren <span class="token operator">===</span> prevChildren<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">bailoutOnAlreadyFinishedWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> workInProgress<span class="token punctuation">,</span> renderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">reconcileChildren</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> workInProgress<span class="token punctuation">,</span> nextChildren<span class="token punctuation">,</span> renderLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">시작의 beginWork에서 HostRoot를 발견하게 되면 fiber는 기존의 fiber tree를 가지고 와서 새롭게 반영될 사항들의 정보를 가지고 있는 fiber node 객체와 기존 객체를 함께 비교하여 변동된 사항을 반영하고, 조정하는 과정을 <code>reconcileChildren</code>이라는 함수를 통해 반영한다. 만약 바꿀 변동사항이 없다면 그대로 둔다. </p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L288)</span>
<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">reconcileChildren</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">workInProgress</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">nextChildren</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
  <span class="token literal-property property">renderLanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If this is a fresh new component that hasn't been rendered yet, we</span>
    <span class="token comment">// won't update its child set by applying minimal side-effects. Instead,</span>
    <span class="token comment">// we will add them all to the child before it gets rendered. That means</span>
    <span class="token comment">// we can optimize this reconciliation pass by not tracking side-effects.</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">child</span> <span class="token operator">=</span> <span class="token function">mountChildFibers</span><span class="token punctuation">(</span>
      workInProgress<span class="token punctuation">,</span>
      <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
      nextChildren<span class="token punctuation">,</span>
      renderLanes<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// If the current child is the same as the work in progress, it means that</span>
    <span class="token comment">// we haven't yet started any work on these children. Therefore, we use</span>
    <span class="token comment">// the clone algorithm to create a copy of all the current children.</span>

    <span class="token comment">// If we had any progressed work already, that is invalid at this point so</span>
    <span class="token comment">// let's throw it out.</span>
    workInProgress<span class="token punctuation">.</span><span class="token property-access">child</span> <span class="token operator">=</span> <span class="token function">reconcileChildFibers</span><span class="token punctuation">(</span>
      workInProgress<span class="token punctuation">,</span>
      current<span class="token punctuation">.</span><span class="token property-access">child</span><span class="token punctuation">,</span>
      nextChildren<span class="token punctuation">,</span>
      renderLanes<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">&gt;</span> 

<span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactChildFiber.new.js#L1245-L1279)</span>
<span class="token comment">// This API will tag the children with the side-effect of the reconciliation</span>
<span class="token comment">// itself. They will be added to the side-effect list as we pass through the</span>
<span class="token comment">// children and the parent.</span>
<span class="token keyword">function</span> <span class="token function">reconcileChildFibers</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">returnFiber</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">currentFirstChild</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">newChild</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
  <span class="token literal-property property">lanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token punctuation">{</span>
<span class="token spread operator">...</span><span class="token punctuation">.</span>
    <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactChildFiber.new.js#L1269)</span>
  <span class="token comment">// Handle object types</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> newChild <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> newChild <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>newChild<span class="token punctuation">.</span><span class="token property-access">$$</span><span class="token keyword">typeof</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token constant">REACT_ELEMENT_TYPE</span><span class="token operator">:</span>
        <span class="token keyword control-flow">return</span> <span class="token function">placeSingleChild</span><span class="token punctuation">(</span>
          <span class="token function">reconcileSingleElement</span><span class="token punctuation">(</span>
            returnFiber<span class="token punctuation">,</span>
            currentFirstChild<span class="token punctuation">,</span>
            newChild<span class="token punctuation">,</span>
            lanes<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token spread operator">...</span>
<span class="token punctuation">}</span>


<span class="token operator">--</span><span class="token operator">&gt;</span>


<span class="token comment">// [Link](https://github.com/facebook/react/blob/9e3b772b8cabbd8cadc7522ebe3dde3279e79d9e/packages/react-reconciler/src/ReactChildFiber.new.js#L1129)</span>
<span class="token keyword">function</span> <span class="token function">reconcileSingleElement</span><span class="token punctuation">(</span>  
    <span class="token parameter"><span class="token literal-property property">returnFiber</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currentFirstChild</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token maybe-class-name">ReactElement</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> child <span class="token operator">=</span> currentFirstChild<span class="token punctuation">;</span>
    <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>child <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token spread operator">...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token constant">REACT_FRAGMENT_TYPE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> created <span class="token operator">=</span> <span class="token function">createFiberFromFragment</span><span class="token punctuation">(</span>
        element<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">,</span>
        returnFiber<span class="token punctuation">.</span><span class="token property-access">mode</span><span class="token punctuation">,</span>
        lanes<span class="token punctuation">,</span>
        element<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      created<span class="token punctuation">.</span><span class="token keyword control-flow">return</span> <span class="token operator">=</span> returnFiber<span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> created<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/9e3b772b8cabbd8cadc7522ebe3dde3279e79d9e/packages/react-reconciler/src/ReactChildFiber.new.js#L1199)</span>
      <span class="token keyword">const</span> created <span class="token operator">=</span> <span class="token function">createFiberFromElement</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> returnFiber<span class="token punctuation">.</span><span class="token property-access">mode</span><span class="token punctuation">,</span> lanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
      created<span class="token punctuation">.</span><span class="token property-access">ref</span> <span class="token operator">=</span> <span class="token function">coerceRef</span><span class="token punctuation">(</span>returnFiber<span class="token punctuation">,</span> currentFirstChild<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
      created<span class="token punctuation">.</span><span class="token keyword control-flow">return</span> <span class="token operator">=</span> returnFiber<span class="token punctuation">;</span>
      <span class="token keyword control-flow">return</span> created<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">재조정 과정은 <code>reconcileChildren</code> -&gt; <code>reconcileChildFibers</code> -&gt; <code>reconcileSingleElement</code>이라는 일련의 과정을 통해 모든 Fiber에 대해 비교하고 재조정하는 과정을 거친다.</p></div><div class="el-p"><p dir="auto"><code>reconcileChildren</code>의 경우는 기존 노드와 비교하여 변경 사항을 감지하고, 새롭게 Fiber 트리를 만들거나 갱신하는 등의 작업을 수행한다. 이 과정에서 내부에서 호출하는 <code>reconcileChildFibers</code>를 통해 자식 Fiber들을 비교하여 어떤 노드를 갱신, 추가 등의 작업을 할지 결정하고, reconcileSingleElement를 통해 단일 자식 요소를 비교하여 갱신이 됐을 경우 <strong>새로운 fiber를 생성하거나 갱신이 필요없는 경우 기존의 fiber를 재활용한다</strong>. 이 기존 업데이트가 없는 노드의 fiber에 대해서 재활용하는 과정을 통해 리액트는 작업을 효율적으로 관리할 수 있었다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberCompleteWork.new.js#L849)</span>
<span class="token keyword">function</span> <span class="token function">completeWork</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">workInProgress</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">renderLanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>workInProgress<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>
      <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberCompleteWork.new.js#L959)</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostComponent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token spread operator">...</span>
            <span class="token comment">// 렌더링된 FiberNode가 있거나 `stateNode`에 DOM 인스턴스가 생성되었다면</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> workInProgress<span class="token punctuation">.</span><span class="token property-access">stateNode</span> <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Update 로직</span>
        <span class="token function">updateHostComponent</span><span class="token punctuation">(</span>
          current<span class="token punctuation">,</span>
          workInProgress<span class="token punctuation">,</span>
          type<span class="token punctuation">,</span>
          newProps<span class="token punctuation">,</span>
          rootContainerInstance<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token spread operator">...</span>
      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 없다면 DOM 인스턴스 생성</span>
                    <span class="token spread operator">...</span>
          <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">createInstance</span><span class="token punctuation">(</span>
            type<span class="token punctuation">,</span>
            newProps<span class="token punctuation">,</span>
            rootContainerInstance<span class="token punctuation">,</span>
            currentHostContext<span class="token punctuation">,</span>
            workInProgress<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">appendAllChildren</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> workInProgress<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          workInProgress<span class="token punctuation">.</span><span class="token property-access">stateNode</span> <span class="token operator">=</span> instance<span class="token punctuation">;</span>
                    <span class="token spread operator">...</span>
      <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">작업이 계속해서 깊이 우선 탐색으로 진행되면서 끝에 다다를 때면 다시 <code>completeWork</code>를 실행시키고 return시킨다. 예시로 든 최초 렌더링의 경우에는&nbsp;<code>createInstance()</code>를 호출하여 DOM 인스턴스를 생성한다.</p></div><div class="el-p"><p dir="auto"><code>createInstance()</code>&nbsp;내부에서는&nbsp;<code>react-dom</code>&nbsp;렌더러에서&nbsp;<code>document.createElement</code> web api를 이용하여&nbsp;html element 인스턴스를 생성한다. 그리고&nbsp;<code>appendAllChildren()</code>에서 child, 즉&nbsp;<code>FiberNode.stateNode</code>를 생성된 DOM 인스턴스에 부착한다. 다시 말해&nbsp;<code>completeWork</code>는 FiberNode로부터 DOM 인스턴스를 완성시키는 과정이다. 마지막에 모든 reconcile 작업이 완료되었을 때는 결국 갱신된 root fiber를 기반으로 재조정되는 하나의 루트 element가 만들어진다.</p></div><div class="el-h3"><h3 data-heading="Commit 단계" dir="auto" class="heading" id="Commit_단계_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Commit 단계</h3></div><div class="el-p"><p dir="auto">Reconcile 단계가 끝나면 DOM을 교체하기 위한 모든 준비는 끝이 났다. DOM element들도 모두 만들어진 상태이며, 해당 요소들은 갱신된 정보들을 기준으로 만들어진 요소들이다.<br>
이 떄, RootComplete status가 되며 Commit 단계로 돌입하여 브라우저에 변경된 사항들이 보이도록 그리는 것이다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function">finishConcurrentRender</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> exitStatus<span class="token punctuation">,</span> lanes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>exitStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token keyword">case</span> <span class="token literal-property property">RootCompleted</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// The work completed. Ready to commit.</span>
      <span class="token function">commitRoot</span><span class="token punctuation">(</span>
        root<span class="token punctuation">,</span>
        workInProgressRootRecoverableErrors<span class="token punctuation">,</span>
        workInProgressTransitions<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown root exit status.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">commitRoot</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">recoverableErrors</span><span class="token operator">:</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">CapturedValue</span><span class="token operator">&lt;</span>mixed<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transitions</span><span class="token operator">:</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Transition</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
        <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L1976)</span>
    <span class="token function">commitRootImpl</span><span class="token punctuation">(</span>
      root<span class="token punctuation">,</span>
      recoverableErrors<span class="token punctuation">,</span>
      transitions<span class="token punctuation">,</span>
      previousUpdateLanePriority<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">commitRootImpl</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">recoverableErrors</span><span class="token operator">:</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">CapturedValue</span><span class="token operator">&lt;</span>mixed<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transitions</span><span class="token operator">:</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Transition</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">renderPriorityLevel</span><span class="token operator">:</span> <span class="token maybe-class-name">EventPriority</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L2163)</span>
    <span class="token function">commitMutationEffects</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> finishedWork<span class="token punctuation">,</span> lanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">commitMutationEffects</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">finishedWork</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">committedLanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberCommitWork.new.js#L2045)</span>
  <span class="token function">commitMutationEffectsOnFiber</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">,</span> root<span class="token punctuation">,</span> committedLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><code>finishConcurrentRender</code> -&gt; <code>CommitRoot</code> -&gt; <code>commitRootImpl</code> -&gt; <code>commitMutationEffects</code> -&gt; <code>commitMutationEffectsOnFiber</code>의 순서대로 안쪽으로 들어가면서 함수가 호출되고, 본격적으로 변경 내용을 커밋하기 시작한다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function">commitMutationEffectsOnFiber</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">finishedWork</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
  <span class="token comment">// The effect flag should be checked *after* we refine the type of fiber,</span>
  <span class="token comment">// because the fiber tag is more specific. An exception is any flag related</span>
  <span class="token comment">// to reconcilation, because those can be set on all fiber types.</span>
  <span class="token keyword control-flow">switch</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>
        <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberCommitWork.new.js#L2254-L2286)</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostRoot</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">recursivelyTraverseMutationEffects</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> finishedWork<span class="token punctuation">,</span> lanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">commitReconciliationEffects</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><code>commitMutationEffectsOnFiber</code>에서는 가장 먼저 들어가는 요소가 fiberRoot가 될 것이므로 <code>recursivelyTraverseMutationEffects</code>를 통해 재귀적으로<code>commitMutationEffectsOnFiber</code>를 DFS 방식으로 호출하여 요소들을 만들어낸다</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function">recursivelyTraverseMutationEffects</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parentFiber</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lanes</span><span class="token operator">:</span> <span class="token maybe-class-name">Lanes</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token comment">// [[Link]](https://github.com/facebook/react/blob/v18.2.0/packages/react-reconciler/src/ReactFiberCommitWork.new.js#L2071-L2079)</span>
  <span class="token keyword">const</span> prevDebugFiber <span class="token operator">=</span> <span class="token function">getCurrentDebugFiberInDEV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>parentFiber<span class="token punctuation">.</span><span class="token property-access">subtreeFlags</span> <span class="token operator">&amp;</span> <span class="token maybe-class-name">MutationMask</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> child <span class="token operator">=</span> parentFiber<span class="token punctuation">.</span><span class="token property-access">child</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>child <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setCurrentDebugFiberInDEV</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">commitMutationEffectsOnFiber</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> root<span class="token punctuation">,</span> lanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
      child <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token property-access">sibling</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">setCurrentDebugFiberInDEV</span><span class="token punctuation">(</span>prevDebugFiber<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">더이상 child와 sibling을 돌고 난 후 child가 없어 탐색할 것들이 없어졌을 경우에는 다음으로 넘어가 <code>commitReconciliationEffects()</code>를 실행한다</p></div><div class="el-pre"><pre class="language-tsx" tabindex="0"><code data-line="0" class="language-tsx is-loaded"><span class="token keyword">function</span> <span class="token function">commitReconciliationEffects</span><span class="token punctuation">(</span>finishedWork<span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token spread operator">...</span>
      <span class="token method function property-access">commitPlacement</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">commitPlacement</span><span class="token punctuation">(</span>finishedWork<span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>  
    <span class="token spread operator">...</span>
  <span class="token comment">// Recursively insert all host nodes into the parent.</span>
  <span class="token keyword">const</span> parentFiber <span class="token operator">=</span> <span class="token function">getHostParentFiber</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Note: these two variables *must* always be updated together.</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>parentFiber<span class="token punctuation">.</span><span class="token property-access">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token spread operator">...</span>
    <span class="token keyword">case</span> <span class="token maybe-class-name">HostRoot</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token maybe-class-name">HostPortal</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> parent<span class="token operator">:</span> <span class="token maybe-class-name">Container</span> <span class="token operator">=</span> parentFiber<span class="token punctuation">.</span><span class="token property-access">stateNode</span><span class="token punctuation">.</span><span class="token property-access">containerInfo</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> before <span class="token operator">=</span> <span class="token function">getHostSibling</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">insertOrAppendPlacementNodeIntoContainer</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">,</span> before<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">finishedWork 인자에는 작업이 끝난 Fiber가 들어오며, 이를 <code>commitPlacement()</code>를 통해서 tag의 분기문 중 HostRoot로 가게 되고<code>insertOrAppendPlacementNodeIntoContainer()</code>를 실행시킨다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function">insertOrAppendPlacementNodeIntoContainer</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token maybe-class-name">Fiber</span><span class="token punctuation">,</span>
  <span class="token literal-property property">before</span><span class="token operator">:</span> <span class="token operator">?</span><span class="token maybe-class-name">Instance</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parent</span><span class="token operator">:</span> <span class="token maybe-class-name">Container</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>tag<span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
  <span class="token keyword">const</span> isHost <span class="token operator">=</span> tag <span class="token operator">===</span> <span class="token maybe-class-name">HostComponent</span> <span class="token operator">||</span> tag <span class="token operator">===</span> <span class="token maybe-class-name">HostText</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isHost<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stateNode <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token property-access">stateNode</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>before<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">insertInContainerBefore</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> stateNode<span class="token punctuation">,</span> before<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      <span class="token function">appendChildToContainer</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> stateNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> <span class="token maybe-class-name">HostPortal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If the insertion itself is a portal, then we don't want to traverse</span>
    <span class="token comment">// down its children. Instead, we'll get insertions from each child in</span>
    <span class="token comment">// the portal directly.</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token property-access">child</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>child <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">insertOrAppendPlacementNodeIntoContainer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> before<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> sibling <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token property-access">sibling</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>sibling <span class="token operator">!==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">insertOrAppendPlacementNodeIntoContainer</span><span class="token punctuation">(</span>sibling<span class="token punctuation">,</span> before<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sibling <span class="token operator">=</span> sibling<span class="token punctuation">.</span><span class="token property-access">sibling</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><code>insertOrAppendPlacementNodeIntoContainer</code>를 통해 만들어진 element가 fiber 정보를 가지고 알맞은 위치에 들어갈 수 있도록 DOM을 구성한다.<br>
완성된 DOM 트리의 경우에는 한번에 커밋되면서 실제 브라우저 상에서 변경 사항이 반영된 DOM 구성요소들이 그려져 볼 수 있는 상태가 비로소 된다.</p></div><div class="el-pre"><pre class="language-js" tabindex="0"><code data-line="0" class="language-js is-loaded"><span class="token keyword">function</span> <span class="token function">commitRootImpl</span><span class="token punctuation">(</span>  
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token maybe-class-name">FiberRoot</span><span class="token punctuation">,</span>
  <span class="token literal-property property">recoverableErrors</span><span class="token operator">:</span> <span class="token keyword null nil">null</span> <span class="token operator">|</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">CapturedValue</span><span class="token operator">&lt;</span>mixed<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">transitions</span><span class="token operator">:</span> <span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Transition</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">renderPriorityLevel</span><span class="token operator">:</span> <span class="token maybe-class-name">EventPriority</span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token comment">// The work-in-progress tree is now the current tree. This must come after</span>
  <span class="token comment">// the mutation phase, so that the previous tree is still current during</span>
  <span class="token comment">// componentWillUnmount, but before the layout phase, so that the finished</span>
  <span class="token comment">// work is current during componentDidMount/Update.</span>
  root<span class="token punctuation">.</span><span class="token property-access">current</span> <span class="token operator">=</span> finishedWork<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">commit이 모두 끝나면 root의 current를 finishedWork로 갱신하여 최신 변경사항을 반영한 rootFiber를 재할당시키면서 최신화시킨다.</p></div><div class="el-p"><p dir="auto">update와 다른 hook과 같은 경우는 너무 길어져서 다음 화에 계속..<br>
<img src="https://i.imgur.com/MtyQSoN.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-hr"><hr></div><div class="el-p"><p dir="auto">react fiber의 존재는 알고 있었지만, 이번에 이렇게 소스코드를 뜯어가면서 딥다이브하고 어떤 식으로 동작하는지 알게 되면서 정말 많은 것들을 알게된 것 같다. 지피지기면 백전백승이라고, 리액트의 원리를 알게 되니 보다 hook과 같은 요소들을 보다 더 잘 쓸 수 있는 용기마저 생긴다..! 아무튼 이런 dfs와 방식으로 학습하는 것을 좋아하는 편이긴 한데, 이거 하나 쓰는데 지금 이해하고 쓰고 고치고를 반복하느라 하루 이상 쓴 것 같다. 적당히 밸런스를 맞춰 학습해야 할 필요성 또한 깨닫게 된 좋은 시간이었을지도...</p></div><div class="el-h3"><h3 data-heading="참조" dir="auto" class="heading" id="참조_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>참조</h3></div><div class="el-p"><p dir="auto"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.cnblogs.com/huayang1995/p/15910753.html" target="_self">https://www.cnblogs.com/huayang1995/p/15910753.html</a><br>
<a rel="noopener nofollow" class="external-link is-unresolved" href="https://d2.naver.com/helloworld/2690975" target="_self">https://d2.naver.com/helloworld/2690975</a><br>
<a rel="noopener nofollow" class="external-link is-unresolved" href="https://m.blog.naver.com/dlaxodud2388/223195103660" target="_self">https://m.blog.naver.com/dlaxodud2388/223195103660</a><br>
<a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.youtube.com/watch?v=ZCuYPiUIONs&amp;t=1463s" target="_self">https://www.youtube.com/watch?v=ZCuYPiUIONs&amp;t=1463s</a><br>
<a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.youtube.com/watch?v=0ympFIwQFJw" target="_self">https://www.youtube.com/watch?v=0ympFIwQFJw</a></p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/5주차/react-fiber.html#React_Fiber_0" data-path="#React_Fiber_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="React Fiber">React Fiber</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#React_Fiber란?_0" data-path="#React_Fiber란?_0"><div class="tree-item-inner heading-link" heading-name="React Fiber란?">React Fiber란?</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#새로운_렌더링_재조정_알고리즘의_필요성_0" data-path="#새로운_렌더링_재조정_알고리즘의_필요성_0"><div class="tree-item-inner heading-link" heading-name="새로운 렌더링 재조정 알고리즘의 필요성">새로운 렌더링 재조정 알고리즘의 필요성</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#React의_동작_단계_0" data-path="#React의_동작_단계_0"><div class="tree-item-inner heading-link" heading-name="React의 동작 단계">React의 동작 단계</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/5주차/react-fiber.html#Fiber_Node_0" data-path="#Fiber_Node_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Fiber Node">Fiber Node</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#왜_도입하게_되었을까?_0" data-path="#왜_도입하게_되었을까?_0"><div class="tree-item-inner heading-link" heading-name="왜 도입하게 되었을까?">왜 도입하게 되었을까?</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/5주차/react-fiber.html#Fiber_Node의_구성요소_0" data-path="#Fiber_Node의_구성요소_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Fiber Node의 구성요소">Fiber Node의 구성요소</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#Instance_0" data-path="#Instance_0"><div class="tree-item-inner heading-link" heading-name="Instance">Instance</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#Fiber_0" data-path="#Fiber_0"><div class="tree-item-inner heading-link" heading-name="Fiber">Fiber</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#flags_0" data-path="#flags_0"><div class="tree-item-inner heading-link" heading-name="flags">flags</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#가상_DOM(fiber)을_이용한_리액트_렌더링_0" data-path="#가상_DOM(fiber)을_이용한_리액트_렌더링_0"><div class="tree-item-inner heading-link" heading-name="가상 DOM(fiber)을 이용한 리액트 렌더링">가상 DOM(fiber)을 이용한 리액트 렌더링</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="부스트캠프/멤버십/5주차/react-fiber.html#첫_브라우저_렌더링까지의_과정_훑어보기_0" data-path="#첫_브라우저_렌더링까지의_과정_훑어보기_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="첫 브라우저 렌더링까지의 과정 훑어보기">첫 브라우저 렌더링까지의 과정 훑어보기</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#엔트리_포인트_만들기_0" data-path="#엔트리_포인트_만들기_0"><div class="tree-item-inner heading-link" heading-name="엔트리 포인트 만들기">엔트리 포인트 만들기</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#재조정(Reconcile)_0" data-path="#재조정(Reconcile)_0"><div class="tree-item-inner heading-link" heading-name="재조정(Reconcile)">재조정(Reconcile)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#Commit_단계_0" data-path="#Commit_단계_0"><div class="tree-item-inner heading-link" heading-name="Commit 단계">Commit 단계</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="부스트캠프/멤버십/5주차/react-fiber.html#참조_0" data-path="#참조_0"><div class="tree-item-inner heading-link" heading-name="참조">참조</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></body></html>